import math


def translate_and_align_to_origin_with_flag(pole_vertices, flag_vertices):
    # Combine the pole and flag vertices
    vertices = pole_vertices + flag_vertices

    # Find the minimum y-coordinate value to identify the bottom of the pole
    min_x = min([float(v.split()[1]) for v in pole_vertices])
    min_y = min([float(v.split()[2]) for v in pole_vertices])
    min_z = min([float(v.split()[3]) for v in pole_vertices])

    # Calculate the translation vector
    translation_x = -min_x
    translation_y = -min_y
    translation_z = -min_z

    # Translate all vertices
    translated_vertices = []
    for line in vertices:
        parts = line.split()
        x = float(parts[1]) + translation_x
        y = float(parts[2]) + translation_y
        z = float(parts[3]) + translation_z
        translated_vertices.append(f'v {x} {y} {z}\n')

    # Rotate the vertices to align with the y-axis
    rotated_vertices = []
    for line in translated_vertices:
        parts = line.split()
        x = float(parts[1])
        y = float(parts[2])
        z = float(parts[3])
        # Rotate around the x-axis to align with y-axis
        new_y = y * math.cos(-math.pi / 2) - z * math.sin(-math.pi / 2)
        new_z = y * math.sin(-math.pi / 2) + z * math.cos(-math.pi / 2)
        rotated_vertices.append(f'v {x} {new_y} {new_z}\n')

    return rotated_vertices


# Pole vertices
pole_vertices = [
    "v 1.13174796 0 -6.87710762",
    "v 1.13174796 0.09727573 -6.87710762",
    "v 1.20053232 0.06878433 -6.87710762",
    "v 1.13174796 0 0.77281785",
    "v 1.20053232 0.06878433 0.77281785",
    "v 1.13174796 0.09727573 0.77281785",
    "v 1.22902369 -0 -6.87710762",
    "v 1.22902369 -0 0.77281785",
    "v 1.20053232 -0.06878433 -6.87710762",
    "v 1.20053232 -0.06878433 0.77281785",
    "v 1.13174796 -0.09727573 -6.87710762",
    "v 1.13174796 -0.09727573 0.77281785",
    "v 1.0629636 -0.06878432 -6.87710762",
    "v 1.0629636 -0.06878432 0.77281785",
    "v 1.03447223 0 -6.87710762",
    "v 1.03447223 0 0.77281785",
    "v 1.0629636 0.06878433 -6.87710762",
    "v 1.0629636 0.06878433 0.77281785"
]

# Flag vertices
flag_vertices = [
    "v 1 -8E-08 -1",
    "v 0.9954142 0.01407096 -0.84939647",
    "v 0.8220762 -0.03841576 -1.00189829",
    "v -0.59225678 -0.11344042 -1.0888164",
    "v -0.567662 -0.15086889 -0.94390053",
    "v -0.77055639 -0.1472784 -1.06730711",
    "v -0.4747026 0.02498566 -1.07295799",
    "v -0.45476004 -0.00892687 -0.92657608",
    "v -0.35159335 0.15821403 -1.05609381",
    "v -0.3535313 0.14080851 -0.90540117",
    "v -0.17147025 0.18701999 -1.04907453",
    "v -0.17895779 0.19368075 -0.89764535",
    "v -0.01007447 0.1030018 -1.03706634",
    "v -0.01044039 0.12457642 -0.88701898",
    "v 0.1296809 -0.01221612 -1.02013016",
    "v 0.12949751 0.00943442 -0.87001783",
    "v 0.2874136 -0.10193403 -1.00716424",
    "v 0.28623384 -0.08215645 -0.85673636",
    "v 0.46817261 -0.12350446 -1.00300384",
    "v 0.46550331 -0.11382553 -0.85157734",
    "v 0.64612222 -0.0849927 -1.00262928",
    "v 0.64467996 -0.08163757 -0.85103106",
    "v 0.81856638 -0.02822822 -0.85059184",
    "v -0.43656233 -0.04100777 -0.77954894",
    "v -0.35148826 0.11802771 -0.75541961",
    "v -0.34589311 0.09232678 -0.60605389",
    "v -0.18679318 0.19601618 -0.74610585",
    "v -0.19441409 0.19333936 -0.59456027",
    "v -0.2011499 0.18572025 -0.44318572",
    "v -0.01167737 0.14556266 -0.73688817",
    "v -0.01445204 0.16435562 -0.58644772",
    "v -0.01896115 0.1796959 -0.43561357",
    "v -0.0251462 0.19053642 -0.2844277",
    "v 0.13150282 0.03427448 -0.7203716",
    "v 0.13434285 0.06045863 -0.57101667",
    "v 0.13692875 0.08653433 -0.42168564",
    "v 0.13819326 0.11095861 -0.2720671",
    "v 0.13688032 0.13158816 -0.12183053",
    "v 0.28564346 -0.06131887 -0.70639384",
    "v 0.28584394 -0.03907616 -0.55619282",
    "v 0.28696728 -0.01507961 -0.40626886",
    "v 0.28885904 0.01028838 -0.25663289",
    "v 0.29110697 0.03633681 -0.10719427",
    "v 0.29294693 0.06194196 0.04226406",
    "v 0.46305814 -0.10145023 -0.70033455",
    "v 0.46110684 -0.08720482 -0.54923505",
    "v 0.45972604 -0.07111386 -0.39828345",
    "v 0.4590022 -0.05290916 -0.24753684",
    "v 0.45903149 -0.03234178 -0.09708356",
    "v 0.45986646 -0.00922035 0.05296569",
    "v 0.46134841 0.01605366 0.20256092",
    "v 0.64380765 -0.08046721 -0.69943291",
    "v 0.64274728 -0.07784064 -0.54783899",
    "v 0.64151192 -0.07272177 -0.3962898",
    "v 0.64028448 -0.06523659 -0.24479587",
    "v 0.63920248 -0.05523935 -0.09338612",
    "v 0.63840544 -0.04224194 0.0578649",
    "v 0.63802058 -0.02591956 0.20883168",
    "v 0.63840574 -0.00409095 0.35907081",
    "v 0.81813794 -0.02857856 -0.69892085",
    "v 0.81901097 -0.03312275 -0.54738408",
    "v 0.81983268 -0.03728966 -0.3958694",
    "v 0.8202486 -0.03976925 -0.24429303",
    "v 0.82031322 -0.04061625 -0.09262932",
    "v 0.82002407 -0.03918657 0.05913649",
    "v 0.81944704 -0.03425017 0.21095999",
    "v 0.81886125 -0.02416126 0.36263314",
    "v 0.81874388 -0.00624351 0.51360971",
    "v 0.99436301 0.01590393 -0.69809431",
    "v 0.99526846 0.01121468 -0.5467605",
    "v 0.99658769 0.00510294 -0.3953729",
    "v 0.99787927 -0.00116999 -0.24389227",
    "v 0.99905914 -0.00756746 -0.09231463",
    "v 0.9999752 -0.01359603 0.05938357",
    "v 1.0003866 -0.01752377 0.21126714",
    "v 1.00030339 -0.01725269 0.36335227",
    "v 0.99999785 -0.01148909 0.51559567",
    "v 1 4E-08 0.66798353"
]

# Translate and align the flag with the pole
translated_vertices = translate_and_align_to_origin_with_flag(pole_vertices, flag_vertices)

# Save the translated vertices to a new OBJ file
with open('/Users/noamfavier/Desktop/output.obj', 'w') as file:
    file.writelines(translated_vertices)

# Path to the translated and aligned flag OBJ file
translated_and_aligned_flag_filename = '/Users/noamfavier/Desktop'


